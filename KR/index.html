<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¡Œå‹•èªªæ˜æœƒ(æ¸¬è©¦ä¸­)</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script>
        tailwind.config = {
            darkMode: 'media',
            theme: {
                extend: {
                    colors: {
                        'kr-blue': '#0047A0', // éŸ“åœ‹å¤ªæ¥µè—
                        'kr-red': '#CD2E3A',  // éŸ“åœ‹å¤ªæ¥µç´…
                        'kr-bg': '#F5F5F7',
                        'kr-dark': '#1a202c',
                        'kr-card-dark': '#2d3748'
                    }
                }
            }
        }
    </script>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script>
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
    </script>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

    <style>
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        body { background-color: #f0f2f5; font-family: "Microsoft JhengHei", -apple-system, sans-serif; }
        
        .phone-frame {
            border: 14px solid #1a1a1a;
            border-radius: 40px;
            overflow: hidden;
            position: relative;
            background: white;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }
        .phone-notch {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 25px;
            background: #1a1a1a;
            border-bottom-left-radius: 12px;
            border-bottom-right-radius: 12px;
            z-index: 50;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- é è¨­è³‡æ–™ (éŸ“åœ‹ç‰ˆ) ---
        const DEFAULT_DATA = {
            tripName: "éŸ“åœ‹æ¿Ÿå·å³¶ä¹‹æ—…",
            tripCode: "",
            dateRange: "", 
            meeting: { 
                date: "", 
                time: "", 
                location: "", 
                badge: "ä¾æ—…è¡Œç¤¾è¦å®š", 
                airportStaff: "" 
            },
            guide: { name: "", twPhone: "", localPhone: "" },
            flights: [
                { type: "å»ç¨‹", airline: "", code: "", date: "", depTime: "", depAirport: "", arrTime: "", arrAirport: "" },
                { type: "å›ç¨‹", airline: "", code: "", date: "", depTime: "", depAirport: "", arrTime: "", arrAirport: "" }
            ],
            days: [
                { 
                    day: 1, date: "", location: "æ¿Ÿå·", lat: 33.49, lon: 126.53, 
                    spots: [{name: "è¡Œç¨‹è¼‰å…¥ä¸­", desc: "è«‹ä¸Šå‚³PDFæª”"}],
                    meals: { b: "", l: "", d: "" },
                    hotel: "", hotelTel: "", hotelAddress: ""
                }
            ],
            info: {
                weather: "éŸ“åœ‹å››å­£åˆ†æ˜ï¼Œæ˜¥ç§‹æ—©æ™šæº«å·®å¤§ã€‚å†¬å­£å¯’å†·ä¹¾ç‡¥ï¼Œéœ€å‚™å¦¥ä¿æš–è¡£ç‰©ã€‚",
                currency: "éŸ“å¹£ (KRW)ã€‚å»ºè­°åœ¨å°ç£å…ˆæ›ç¾é‡‘ï¼Œåˆ°éŸ“åœ‹æ©Ÿå ´æˆ–å¸‚å€æ›éŒ¢æ‰€å…Œæ›éŸ“å¹£åŒ¯ç‡è¼ƒä½³ã€‚",
                voltage: "220V å…©å­”åœ“å½¢æ’åº§ (è±¬é¼»å­)ã€‚",
                baggage: "åš´ç¦æ”œå¸¶è‚‰é¡è£½å“å…¥å¢ƒã€‚è¡Œå‹•é›»æºè«‹éš¨èº«æ”œå¸¶ã€‚",
                imageRoot: "",
                pdfPath: "",
                surveyUrl: "",
                entryCardTutorialUrl: "", // æ–°å¢ï¼šé›»å­å…¥å¢ƒå¡æ•™å­¸PDFé€£çµ
                tips: {
                    perDay: 300,
                    days: 5,
                    currency: "æ–°å°å¹£"
                }
            }
        };

        // --- éŸ“åœ‹ä¸»è¦åŸå¸‚åº§æ¨™ ---
        const CITIES = {
            "å°åŒ—": { lat: 25.03, lon: 121.56 },
            "å°ä¸­": { lat: 24.14, lon: 120.68 },
            "é«˜é›„": { lat: 22.62, lon: 120.30 },
            "é¦–çˆ¾": { lat: 37.56, lon: 126.97 },
            "ä»å·": { lat: 37.45, lon: 126.70 },
            "é‡œå±±": { lat: 35.17, lon: 129.07 },
            "å¤§é‚±": { lat: 35.87, lon: 128.60 },
            "æ¿Ÿå·": { lat: 33.49, lon: 126.53 },
            "è¥¿æ­¸æµ¦": { lat: 33.25, lon: 126.56 },
            "å…‰å·": { lat: 35.15, lon: 126.85 },
            "æ˜¥å·": { lat: 37.88, lon: 127.73 }
        };

        // --- Client HTML ç”Ÿæˆ ---
        function getClientHtml(data) {
            const jsonStr = JSON.stringify(data);
            
            // è­˜åˆ¥ç‰Œé¡è‰²é‚è¼¯
            let badgeColorClass = "bg-blue-600";
            if (data.meeting.badge.includes("ç´…")) badgeColorClass = "bg-red-600";
            else if (data.meeting.badge.includes("é»ƒ")) badgeColorClass = "bg-yellow-500";
            else if (data.meeting.badge.includes("ç¶ ")) badgeColorClass = "bg-green-600";
            
            const totalTips = (data.info.tips.perDay * data.info.tips.days).toLocaleString();
            
            // åœ–ç‰‡è·¯å¾‘é‚è¼¯
            let imageList = [];
            let imgInput = (data.info.imageRoot || "").trim();
            if (imgInput) {
                if (imgInput.includes("\n") || imgInput.includes(",")) {
                    imageList = imgInput.split(/[\n,]+/).map(s => s.trim()).filter(s => s);
                } else if (/\.(jpg|jpeg|png|gif|webp|bmp)$/i.test(imgInput)) {
                    imageList = [imgInput];
                } else {
                    const path = imgInput.endsWith('/') ? imgInput : imgInput + '/';
                    imageList = [1,2,3,4,5,6,7,8].map(i => `${path}img${i}.jpg`);
                }
            }

            const showDriverCardHint = data.days.some(d => d.hotelAddress && d.hotelAddress.trim() !== "");
            
            const htmlParts = [
                '<!DOCTYPE html>',
                '<html lang="zh-TW">',
                '<head>',
                '    <meta charset="UTF-8">',
                '    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">',
                `    <title>${data.tripName}</title>`,
                '    <script src="https://cdn.tailwindcss.com"><\/script>',
                '    <script>',
                '        tailwind.config = {',
                '            darkMode: "media",',
                '            theme: {',
                '                extend: {',
                '                    colors: {',
                '                        "kr-blue": "#0047A0",',
                '                        "kr-red": "#CD2E3A",',
                '                        "kr-bg": "#F5F5F7",',
                '                        "kr-dark": "#1a202c",',
                '                        "kr-card-dark": "#2d3748"',
                '                    }',
                '                }',
                '            }',
                '        }',
                '    <\/script>',
                '    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">',
                '    <style>',
                '        @import url("https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&family=Noto+Sans+TC:wght@300;400;500;700&display=swap");',
                '        body { font-family: "Noto Sans TC", "Noto Sans KR", sans-serif; background-color: #F5F5F7; -webkit-tap-highlight-color: transparent; }',
                '        .no-scrollbar::-webkit-scrollbar { display: none; }',
                '        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }',
                '        .card-shadow { box-shadow: 0 4px 15px rgba(0,0,0,0.05); }',
                '        .korea-pattern {',
                '            background: linear-gradient(135deg, #0047A0 0%, #1e3a8a 100%);',
                '            position: relative;',
                '            overflow: hidden;',
                '        }',
                '        .korea-pattern::after {',
                '            content: "";',
                '            position: absolute;',
                '            right: -20px;',
                '            bottom: -20px;',
                '            width: 100px;',
                '            height: 100px;',
                '            background: rgba(205, 46, 58, 0.2);',
                '            border-radius: 50%;',
                '            filter: blur(20px);',
                '        }',
                '        .tab-active { color: #0047A0; border-bottom: 3px solid #CD2E3A; font-weight: 700; }',
                '        @media (prefers-color-scheme: dark) {',
                '            .tab-active { color: #ffffff; border-bottom: 3px solid #F87171; }',
                '            .korea-pattern { background: #1a202c; }',
                '        }',
                '        .tab-inactive { color: #A0AEC0; }',
                '        .detail-content { transition: all 0.3s ease; }',
                '        .rotate-180 { transform: rotate(180deg); }',
                '        .custom-checkbox input:checked + div { background-color: #0047A0; border-color: #0047A0; }',
                '        .custom-checkbox input:checked + div:after { content: "âœ“"; color: white; display: block; text-align: center; line-height: 20px; font-size: 14px; }',
                '        @media (prefers-color-scheme: dark) {',
                '             .custom-checkbox input:checked + div { background-color: #4A5568; border-color: #4A5568; }',
                '        }',
                '    </style>',
                '</head>',
                '<body class="bg-kr-bg text-gray-700 h-screen flex flex-col max-w-md mx-auto shadow-2xl relative overflow-hidden dark:bg-kr-dark dark:text-gray-200 transition-colors duration-300">',
                '',
                '    <div id="app-header" class="fixed top-0 w-full max-w-md z-50 bg-kr-bg dark:bg-kr-dark transition-colors duration-300 shadow-sm">',
                '        <div class="korea-pattern pt-8 pb-4 px-6 text-white">',
                '            <div class="flex justify-between items-end">',
                '                <div>',
                '                    <p class="text-[10px] font-bold tracking-[0.2em] opacity-80 uppercase mb-1">è¡Œå‹•èªªæ˜æœƒ(æ¸¬è©¦ä¸­)</p>',
                `                    <h1 class="text-xl font-bold leading-tight">${data.tripName}</h1>`,
                '                    <p class="text-xs opacity-90 mt-1 font-light flex items-center gap-2">',
                `                        <span><i class="far fa-calendar-alt mr-1"></i> ${data.meeting.date} å‡ºç™¼</span>`,
                `                        <span class="bg-white/20 px-2 py-0.5 rounded text-[10px]">${data.tripCode}</span>`,
                '                    </p>',
                '                </div>',
                '                <div class="text-right">',
                '                     <div id="location-label" class="text-[10px] opacity-70 mb-1"><i class="fas fa-map-marker-alt mr-1"></i>åµæ¸¬ä¸­...</div>',
                '                     <div id="header-weather" class="text-2xl font-light">--<span class="text-sm">Â°C</span></div>',
                '                </div>',
                '            </div>',
                '        </div>',
                '        <nav class="flex justify-around border-b border-gray-100 dark:border-gray-700 bg-white dark:bg-kr-card-dark">',
                '            <button onclick="switchTab(\'itinerary\')" id="btn-itinerary" class="flex-1 py-3 text-sm tab-active transition-all"><i class="fas fa-map-signs mr-1"></i> è¡Œç¨‹</button>',
                '            <button onclick="switchTab(\'info\')" id="btn-info" class="flex-1 py-3 text-sm tab-inactive transition-all"><i class="fas fa-info-circle mr-1"></i> è³‡è¨Š</button>',
                '            <button onclick="switchTab(\'tools\')" id="btn-tools" class="flex-1 py-3 text-sm tab-inactive transition-all"><i class="fas fa-suitcase mr-1"></i> å·¥å…·</button>',
                '        </nav>',
                '    </div>',
                '',
                '    ',
                '    <main class="flex-1 overflow-y-auto no-scrollbar pb-10 px-4" id="main-content">',
                '        ',
                '        <div id="view-itinerary" class="space-y-4 pb-10">',
                '            ',
                '            <div class="bg-white dark:bg-kr-card-dark rounded-xl p-4 shadow-sm border-l-4 border-kr-red relative overflow-hidden card-shadow">',
                '                <div class="flex justify-between items-start mb-3">',
                '                    <div class="flex-1">',
                '                        <h3 class="text-sm font-bold text-gray-800 dark:text-gray-100 mb-2 flex items-center gap-2"><i class="far fa-clock text-kr-red"></i> é›†åˆè³‡è¨Š</h3>',
                '                        <div class="flex gap-4">',
                '                            <div>',
                '                                <p class="text-[10px] text-gray-400">é›†åˆæ™‚é–“</p>',
                `                                <p class="text-xl font-bold text-kr-red">${data.meeting.time}</p>`,
                '                            </div>',
                '                        </div>',
                '                        <div class="mt-2">',
                '                            <p class="text-[10px] text-gray-400">é›†åˆåœ°é»</p>',
                `                            <p class="text-sm text-gray-600 dark:text-gray-300 leading-tight font-medium whitespace-pre-wrap">${data.meeting.location}</p>`,
                '                        </div>',
                '                         <div class="mt-2">',
                '                            <p class="text-[10px] text-gray-400">è­˜åˆ¥ç‰Œ</p>',
                `                            <span class="inline-block ${badgeColorClass} text-white text-xs px-2 py-0.5 rounded shadow-sm">${data.meeting.badge}</span>`,
                '                        </div>',
                '                    </div>',
                '                    <div class="text-right pl-2 border-l border-dashed border-gray-200 dark:border-gray-600 flex flex-col items-center justify-center min-w-[70px]">',
                `                        <p class="text-[10px] text-gray-400 mb-1">é ˜éšŠ ${data.guide.name}</p>`,
                `                        <button onclick="callGuide('${data.guide.twPhone}')" class="flex flex-col items-center justify-center w-12 h-12 bg-green-500 text-white rounded-full shadow-lg active:scale-95 transition-transform"><i class="fas fa-phone text-xl"></i></button>`,
                `                        <p class="text-[10px] text-gray-500 mt-1">${data.guide.twPhone}</p>`,
                '                    </div>',
                '                </div>',
                data.meeting.airportStaff ? `                <div class="pt-2 border-t border-dashed border-gray-200 dark:border-gray-600 text-xs text-gray-500 dark:text-gray-400 flex justify-between"><span>æ©Ÿå ´å°ˆå“¡</span><span>${data.meeting.airportStaff}</span></div>` : '',
                '            </div>',
                '',
                data.days.map((day, idx) => `
                <div class="bg-white dark:bg-kr-card-dark rounded-xl shadow-sm overflow-hidden p-5 transition-colors card-shadow">
                    <div class="flex justify-between items-start mb-3 border-b border-gray-100 dark:border-gray-700 pb-2">
                        <div>
                            <h2 class="font-bold text-lg text-kr-blue dark:text-blue-200">DAY ${day.day} <span class="text-xs font-normal text-gray-400 ml-2">${day.date}</span></h2>
                            <div id="weather-stats-${idx}" class="mt-2 flex flex-wrap gap-y-2"><span class="text-xs text-gray-400">è¼‰å…¥ä¸­...</span></div>
                        </div>
                        <div id="weather-icon-${idx}" class="text-2xl text-gray-300"></div>
                    </div>

                    <div class="space-y-4 relative pl-4 border-l-2 border-gray-100 dark:border-gray-600 pb-2 pt-2">
                        <p class="text-[10px] text-gray-400 absolute -top-2 left-2 bg-white dark:bg-kr-card-dark px-1">${day.location || 'è¡Œç¨‹'}</p>
                        
                        ${day.spots.map((spot, sIdx) => `
                        <div class="relative cursor-pointer group" onclick="toggleDetail(this)">
                            <div class="absolute -left-[21px] top-1 w-3 h-3 ${sIdx % 2 === 0 ? 'bg-green-500' : 'bg-blue-400'} rounded-full border-2 border-white dark:border-gray-600"></div>
                            <div class="flex justify-between items-center">
                                <h3 class="font-bold text-gray-800 dark:text-gray-100 text-sm leading-tight">${spot.name}</h3>
                                <i class="fas fa-chevron-down text-xs text-gray-300 transition-transform duration-300 mt-1"></i>
                            </div>
                            <div class="detail-content hidden mt-2 text-sm text-gray-600 dark:text-gray-300 bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg leading-relaxed text-justify">
                                ${spot.desc || 'ç„¡è©³ç´°ä»‹ç´¹'}
                            </div>
                        </div>
                        `).join('')}

                        <div class="relative cursor-pointer" onclick="${day.hotelAddress ? `showHotelCard('${day.hotel}', '${day.hotelTel}', '${day.hotelAddress}', 'Day ${day.day}')` : ''}">
                            <div class="absolute -left-[21px] top-1 w-3 h-3 bg-purple-400 rounded-full border-2 border-white dark:border-gray-600"></div>
                            <div class="flex justify-between items-center">
                                <h3 class="font-bold text-gray-800 dark:text-gray-100 text-sm"><i class="fas fa-bed text-purple-400 mr-1"></i> ${day.hotel}</h3>
                                ${day.hotelAddress ? '<i class="fas fa-search-plus text-gray-300 text-xs"></i>' : ''}
                            </div>
                            <p class="text-[10px] text-gray-400 pl-5 mt-1">${day.hotel.includes('æº«æš–çš„å®¶') ? '' : `TEL: ${day.hotelTel || 'è©³æ´½é ˜éšŠ'}`}</p>
                        </div>
                    </div>

                    <div class="mt-3 bg-gray-50 dark:bg-gray-700 rounded-lg p-3 text-sm text-gray-600 dark:text-gray-300 space-y-1">
                        <div class="flex"><span class="w-8 font-bold text-gray-400 text-xs pt-0.5">æ—©é¤</span> <span class="flex-1">${day.meals.b}</span></div>
                        <div class="flex"><span class="w-8 font-bold text-gray-400 text-xs pt-0.5">åˆé¤</span> <span class="flex-1">${day.meals.l}</span></div>
                        <div class="flex"><span class="w-8 font-bold text-gray-400 text-xs pt-0.5">æ™šé¤</span> <span class="flex-1">${day.meals.d}</span></div>
                    </div>
                </div>
                `).join(''),
                '',
                '            <div class="text-center text-xs text-gray-400 py-4 pb-20">æœ¬ç¶²é æ¸¬è©¦ä¸­ï¼Œå¦‚æœ‰å‹˜èª¤è«‹ä¾ç…§ç´™æœ¬èªªæ˜æœƒè³‡æ–™ç‚ºæº–<br>ç¥æ‚¨æ—…é€”æ„‰å¿« Have a Nice Trip</div>',
                '        </div>',
                '',
                '        <div id="view-info" class="hidden space-y-4 pb-10">',
                '            ',
                '            <div class="bg-white dark:bg-kr-card-dark rounded-xl p-5 card-shadow transition-colors border-l-4 border-yellow-500">',
                '                <h3 class="font-bold text-gray-800 dark:text-gray-100 mb-2"><i class="fas fa-hand-holding-usd text-yellow-500 mr-2"></i>æœå‹™è²»èªªæ˜</h3>',
                '                <p class="text-sm text-gray-600 dark:text-gray-300 leading-relaxed">',
                `                    æœ¬è¡Œç¨‹å°éŠé ˜éšŠå¸æ©Ÿçš„æœå‹™è²»ç‚ºï¼Œæ¯ä½æ—…å®¢æ¯å¤© <span class="font-bold text-kr-red">${data.info.tips.currency} ${data.info.tips.perDay} å…ƒ</span>ï¼Œ`,
                `                    ${data.info.tips.days} å¤©å…± <span class="font-bold text-kr-red">${data.info.tips.currency} ${totalTips} å…ƒ</span>ï¼Œ`,
                '                    è«‹ä¸€å¾‹åœ¨éŸ“åœ‹ç•¶åœ°æ”¯ä»˜çµ¦é ˜éšŠã€‚',
                '                </p>',
                '            </div>',
                '',
                '            ',
                '            <div class="bg-white dark:bg-kr-card-dark rounded-xl p-5 card-shadow transition-colors border-l-4 border-kr-blue">',
                '                <h3 class="font-bold text-gray-800 dark:text-gray-100 mb-2"><i class="fas fa-passport text-kr-blue mr-2"></i>å…¥å¢ƒå¡å¡«å¯«</h3>',
                '                <p class="text-xs text-gray-500 dark:text-gray-400 mb-3">è«‹æ–¼å‡ºç™¼å‰æˆ–æ©Ÿä¸Šå®Œæˆå¡«å¯«ï¼Œä»¥åŠ é€Ÿé€šé—œã€‚</p>',
                '                <div class="grid grid-cols-1 gap-2">',
                '                    <a href="https://www.e-arrivalcard.go.kr" target="_blank" class="block w-full bg-kr-blue hover:bg-blue-800 text-white text-center py-2 rounded-lg font-bold shadow-sm transition text-sm">',
                '                        <i class="fas fa-globe mr-1"></i> ç·šä¸Šç”³è«‹é›»å­å…¥å¢ƒå¡',
                '                    </a>',
                data.info.entryCardTutorialUrl ? `
                '                    <a href="${data.info.entryCardTutorialUrl}" target="_blank" class="block w-full bg-gray-100 hover:bg-gray-200 text-gray-700 text-center py-2 rounded-lg font-bold shadow-sm transition text-sm border border-gray-300">',
                '                        <i class="fas fa-file-pdf mr-1"></i> ä¸‹è¼‰å¡«å¯«æ•™å­¸ PDF',
                '                    </a>` : '',
                '                </div>',
                '            </div>',
                '',
                '            <div class="bg-white dark:bg-kr-card-dark rounded-xl p-5 card-shadow transition-colors">',
                '                <h3 class="font-bold text-gray-800 dark:text-gray-100 mb-3 border-l-4 border-orange-400 pl-3">èˆªç­è³‡è¨Š</h3>',
                data.flights.map(f => `
                <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-3 mb-2">
                    <div class="flex justify-between text-sm mb-1 text-gray-600 dark:text-gray-300">
                        <span class="font-bold">${f.type} ${f.code}</span><span>${f.date}</span>
                    </div>
                    <div class="grid grid-cols-[1fr_auto_1fr] items-center text-gray-800 dark:text-white">
                        <div><div class="text-xl font-bold">${f.depTime}</div><div class="text-xs opacity-60">${f.depAirport}</div></div>
                        <div class="text-center"><i class="fas fa-arrow-right opacity-40"></i></div>
                        <div class="text-right"><div class="text-xl font-bold">${f.arrTime}</div><div class="text-xs opacity-60">${f.arrAirport}</div></div>
                    </div>
                </div>`).join(''),
                '            </div>',
                '',
                '            <div class="bg-white dark:bg-kr-card-dark rounded-xl p-5 card-shadow transition-colors">',
                '                <h3 class="font-bold text-gray-800 dark:text-gray-100 mb-3"><i class="fas fa-hotel text-indigo-400 mr-2"></i>ä½å®¿è³‡è¨Š</h3>',
                '                <ul class="text-sm space-y-3 dark:text-gray-300">',
                data.days.map(d => `
                    <li class="flex justify-between border-b border-gray-50 dark:border-gray-700 pb-2 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 p-1 rounded" onclick="${d.hotelAddress ? `showHotelCard('${d.hotel}', '${d.hotelTel}', '${d.hotelAddress}', 'Day ${d.day}')` : ''}">
                        <span class="text-kr-blue dark:text-indigo-300 font-bold">Day ${d.day} ${d.hotelAddress ? '<i class="fas fa-search-plus text-xs ml-1 opacity-50"></i>' : ''}</span>
                        <span class="font-medium text-right">${d.hotel}<br><span class="text-xs text-gray-400">${d.hotel.includes('æº«æš–çš„å®¶') ? '' : d.hotelTel || 'è©³æ´½é ˜éšŠ'}</span></span>
                    </li>`).join(''),
                '                </ul>',
                showDriverCardHint ? '<p class="text-[10px] text-gray-400 mt-2 text-right">* é»æ“Šé£¯åº—å¯é¡¯ç¤ºçµ¦å¸æ©Ÿçœ‹çš„å¡ç‰‡</p>' : '',
                '            </div>',
                '',
                '            <div class="space-y-3">',
                '                <div class="bg-orange-50 dark:bg-orange-900/20 p-4 rounded-xl">',
                '                    <i class="fas fa-sun text-orange-500 text-xl mb-2"></i>',
                '                    <h4 class="font-bold text-sm text-gray-700 dark:text-gray-200">å¤©æ°£ç©¿è‘—</h4>',
                `                    <p class="text-xs text-gray-500 dark:text-gray-400 mt-1 leading-relaxed">${data.info.weather}</p>`,
                '                </div>',
                '                <div class="bg-green-50 dark:bg-green-900/20 p-4 rounded-xl">',
                '                    <i class="fas fa-money-bill-wave text-green-500 text-xl mb-2"></i>',
                '                    <h4 class="font-bold text-sm text-gray-700 dark:text-gray-200">è²¨å¹£åŒ¯ç‡</h4>',
                `                    <p class="text-xs text-gray-500 dark:text-gray-400 mt-1 leading-relaxed">${data.info.currency}</p>`,
                '                </div>',
                '                <div class="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-xl">',
                '                    <h4 class="font-bold text-sm text-gray-700 dark:text-gray-200 mb-1"><i class="fas fa-suitcase text-blue-500 mr-2"></i>è¡Œæèˆ‡é ˆçŸ¥</h4>',
                `                    <p class="text-xs text-gray-500 dark:text-gray-400 leading-relaxed">${data.info.baggage}</p>`,
                '                </div>',
                '            </div>',
                '',
                imageList.length > 0 ? `
                <div class="bg-white dark:bg-kr-card-dark rounded-xl p-5 card-shadow transition-colors mt-4">
                    <h3 class="font-bold text-gray-800 dark:text-gray-100 mb-3"><i class="fas fa-images text-pink-500 mr-2"></i>æ³¨æ„äº‹é …</h3>
                    <div class="grid grid-cols-1 gap-2">
                        ${imageList.map(url => `<img src="${url}" onerror="this.style.display='none'" class="w-full h-auto object-contain rounded-lg shadow-sm">`).join('')}
                    </div>
                    <p class="text-[10px] text-gray-400 mt-2 text-center">* è«‹è©³é–±ä»¥ä¸Šæ³¨æ„äº‹é …</p>
                </div>` : '',
                '',
                data.info.pdfPath ? `
                <a href="${data.info.pdfPath}" target="_blank" class="block w-full bg-gray-800 hover:bg-gray-700 text-white text-center py-3 rounded-xl font-bold mt-6 shadow-md transition">
                    <i class="fas fa-file-pdf mr-2"></i> ä¸‹è¼‰ç´™æœ¬èªªæ˜æœƒè³‡æ–™
                </a>` : '',
                data.info.surveyUrl ? `
                <a href="${data.info.surveyUrl}" target="_blank" class="block w-full bg-teal-600 hover:bg-teal-700 text-white text-center py-3 rounded-xl font-bold mt-6 shadow-md transition">
                    <i class="fas fa-smile mr-2"></i> å¡«å¯«å®¢æˆ¶æ»¿æ„åº¦èª¿æŸ¥
                </a>` : '',
                '            <div class="text-center text-xs text-gray-400 py-4 pb-20">æœ¬ç¶²é æ¸¬è©¦ä¸­ï¼Œå¦‚æœ‰å‹˜èª¤è«‹ä¾ç…§ç´™æœ¬èªªæ˜æœƒè³‡æ–™ç‚ºæº–<br>ç¥æ‚¨æ—…é€”æ„‰å¿« Have a Nice Trip</div>',
                '        </div>',
                '',
                '        <div id="view-tools" class="hidden space-y-6 pb-10">',
                '            ',
                '            <div class="bg-white dark:bg-kr-card-dark rounded-xl p-5 card-shadow transition-colors">',
                '                <h3 class="font-bold text-gray-800 dark:text-gray-100 mb-3"><i class="fas fa-tasks text-teal-500 mr-2"></i>æ—…äººæª¢æŸ¥æ¸…å–®</h3>',
                '                <div class="space-y-4">',
                '                    <div>',
                '                        <p class="text-xs text-gray-400 mb-2 font-bold uppercase tracking-wider bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-300 px-2 py-1 rounded inline-block">é‡è¦æ–‡ä»¶</p>',
                '                        <div class="grid grid-cols-2 gap-2">',
                '                            <label class="flex items-center space-x-2 cursor-pointer custom-checkbox">',
                '                                <input type="checkbox" id="check_doc_passport" class="hidden" onchange="saveCheck(this.id)">',
                '                                <div class="w-4 h-4 border-2 border-gray-300 rounded flex items-center justify-center transition-colors"></div>',
                '                                <span class="text-sm text-gray-600 dark:text-gray-300">è­·ç…§ (æª¢æŸ¥æ•ˆæœŸ)</span>',
                '                            </label>',
                '                            <label class="flex items-center space-x-2 cursor-pointer custom-checkbox">',
                '                                <input type="checkbox" id="check_doc_money" class="hidden" onchange="saveCheck(this.id)">',
                '                                <div class="w-4 h-4 border-2 border-gray-300 rounded flex items-center justify-center transition-colors"></div>',
                '                                <span class="text-sm text-gray-600 dark:text-gray-300">éŸ“å¹£/ç¾é‡‘</span>',
                '                            </label>',
                '                            <label class="flex items-center space-x-2 cursor-pointer custom-checkbox">',
                '                                <input type="checkbox" id="check_doc_vjw" class="hidden" onchange="saveCheck(this.id)">',
                '                                <div class="w-4 h-4 border-2 border-gray-300 rounded flex items-center justify-center transition-colors"></div>',
                '                                <span class="text-sm text-gray-600 dark:text-gray-300">ä¿¡ç”¨å¡</span>',
                '                            </label>',
                '                            <label class="flex items-center space-x-2 cursor-pointer custom-checkbox">',
                '                                <input type="checkbox" id="check_doc_ticket" class="hidden" onchange="saveCheck(this.id)">',
                '                                <div class="w-4 h-4 border-2 border-gray-300 rounded flex items-center justify-center transition-colors"></div>',
                '                                <span class="text-sm text-gray-600 dark:text-gray-300">å€‹äººæ—…éŠä¿éšª</span>',
                '                            </label>',
                '                        </div>',
                '                    </div>',
                '                    <div>',
                '                        <p class="text-xs text-gray-400 mb-2 font-bold uppercase tracking-wider bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-300 px-2 py-1 rounded inline-block">3C ç”¢å“</p>',
                '                        <div class="grid grid-cols-2 gap-2">',
                '                            <label class="flex items-center space-x-2 cursor-pointer custom-checkbox">',
                '                                <input type="checkbox" id="check_3c_phone" class="hidden" onchange="saveCheck(this.id)">',
                '                                <div class="w-4 h-4 border-2 border-gray-300 rounded flex items-center justify-center transition-colors"></div>',
                '                                <span class="text-sm text-gray-600 dark:text-gray-300">ç¶²å¡/æ¼«éŠ</span>',
                '                            </label>',
                '                            <label class="flex items-center space-x-2 cursor-pointer custom-checkbox">',
                '                                <input type="checkbox" id="check_3c_charge" class="hidden" onchange="saveCheck(this.id)">',
                '                                <div class="w-4 h-4 border-2 border-gray-300 rounded flex items-center justify-center transition-colors"></div>',
                '                                <span class="text-sm text-gray-600 dark:text-gray-300">å……é›»å™¨/å……é›»ç·š</span>',
                '                            </label>',
                '                            <label class="flex items-center space-x-2 cursor-pointer custom-checkbox">',
                '                                <input type="checkbox" id="check_3c_bank" class="hidden" onchange="saveCheck(this.id)">',
                '                                <div class="w-4 h-4 border-2 border-gray-300 rounded flex items-center justify-center transition-colors"></div>',
                '                                <span class="text-sm text-gray-600 dark:text-gray-300">è¡Œå‹•é›»æº</span>',
                '                            </label>',
                '                        </div>',
                '                        <div class="mt-2 text-[10px] text-yellow-600 bg-yellow-50 dark:bg-yellow-900/20 dark:text-yellow-400 p-2 rounded">',
                '                            âš¡ éŸ“åœ‹é›»å£“ 220V (å…©å­”åœ“æ’)ï¼Œè«‹å‹™å¿…æ”œå¸¶è½‰æ¥é ­ï¼',
                '                        </div>',
                '                    </div>',
                '                    <div>',
                '                        <p class="text-xs text-gray-400 mb-2 font-bold uppercase tracking-wider bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-300 px-2 py-1 rounded inline-block">å€‹äºº / ç›¥æ´— / è—¥å“</p>',
                '                        <div class="grid grid-cols-2 gap-2">',
                '                            <label class="flex items-center space-x-2 cursor-pointer custom-checkbox">',
                '                                <input type="checkbox" id="check_item_rain" class="hidden" onchange="saveCheck(this.id)">',
                '                                <div class="w-4 h-4 border-2 border-gray-300 rounded flex items-center justify-center transition-colors"></div>',
                '                                <span class="text-sm text-gray-600 dark:text-gray-300">é›¨å…·/æ‘ºç–Šå‚˜</span>',
                '                            </label>',
                '                            <label class="flex items-center space-x-2 cursor-pointer custom-checkbox">',
                '                                <input type="checkbox" id="check_item_coat" class="hidden" onchange="saveCheck(this.id)">',
                '                                <div class="w-4 h-4 border-2 border-gray-300 rounded flex items-center justify-center transition-colors"></div>',
                '                                <span class="text-sm text-gray-600 dark:text-gray-300">å¤–å¥—/ä¿æš–è¡£ç‰©</span>',
                '                            </label>',
                '                            <label class="flex items-center space-x-2 cursor-pointer custom-checkbox">',
                '                                <input type="checkbox" id="check_item_wash" class="hidden" onchange="saveCheck(this.id)">',
                '                                <div class="w-4 h-4 border-2 border-gray-300 rounded flex items-center justify-center transition-colors"></div>',
                '                                <span class="text-sm text-gray-600 dark:text-gray-300">ç‰™åˆ·/æ´—é¢ä¹³</span>',
                '                            </label>',
                '                            <label class="flex items-center space-x-2 cursor-pointer custom-checkbox">',
                '                                <input type="checkbox" id="check_item_meds" class="hidden" onchange="saveCheck(this.id)">',
                '                                <div class="w-4 h-4 border-2 border-gray-300 rounded flex items-center justify-center transition-colors"></div>',
                '                                <span class="text-sm text-gray-600 dark:text-gray-300">å€‹äººå¸¸å‚™è—¥</span>',
                '                            </label>',
                '                        </div>',
                '                        <div class="mt-2 text-[10px] text-gray-400 p-1">',
                '                           * éŸ“åœ‹éŸ¿æ‡‰ç’°ä¿ï¼Œè¨±å¤šé£¯åº—ä¸æä¾›ä¸€æ¬¡æ€§ç›¥æ´—ç”¨å“(ç‰™åˆ·ç‰™è†)ï¼Œå¼·çƒˆå»ºè­°è‡ªå‚™ã€‚',
                '                        </div>',
                '                    </div>',
                '                </div>',
                '                <div class="mt-6 pt-4 border-t border-gray-100 dark:border-gray-700">',
                '                    <p class="text-xs text-gray-400 mb-2 font-bold uppercase tracking-wider">æ¯æ—¥é€€æˆ¿æª¢æŸ¥ (é˜²æ­¢éºè½)</p>',
                '                    <div class="space-y-2">',
                '                        <label class="flex items-center space-x-3 cursor-pointer custom-checkbox">',
                '                            <input type="checkbox" id="daily_charger" class="hidden" onchange="saveCheck(this.id)">',
                '                            <div class="w-5 h-5 border-2 border-gray-300 rounded flex items-center justify-center transition-colors"></div>',
                '                            <span class="text-sm text-gray-600 dark:text-gray-300">å……é›»å™¨ / è½‰æ¥é ­ / è¡Œå‹•é›»æº</span>',
                '                        </label>',
                '                        <label class="flex items-center space-x-3 cursor-pointer custom-checkbox">',
                '                            <input type="checkbox" id="daily_wash" class="hidden" onchange="saveCheck(this.id)">',
                '                            <div class="w-5 h-5 border-2 border-gray-300 rounded flex items-center justify-center transition-colors"></div>',
                '                            <span class="text-sm text-gray-600 dark:text-gray-300">ç›¥æ´—åŒ… / çœ¼é¡ / éš±çœ¼</span>',
                '                        </label>',
                '                        <label class="flex items-center space-x-3 cursor-pointer custom-checkbox">',
                '                            <input type="checkbox" id="daily_wifi" class="hidden" onchange="saveCheck(this.id)">',
                '                            <div class="w-5 h-5 border-2 border-gray-300 rounded flex items-center justify-center transition-colors"></div>',
                '                            <span class="text-sm text-gray-600 dark:text-gray-300">è­·ç…§ / éš¨èº«è²´é‡ç‰©å“</span>',
                '                        </label>',
                '                        <label class="flex items-center space-x-3 cursor-pointer custom-checkbox">',
                '                            <input type="checkbox" id="daily_key" class="hidden" onchange="saveCheck(this.id)">',
                '                            <div class="w-5 h-5 border-2 border-gray-300 rounded flex items-center justify-center transition-colors"></div>',
                '                            <span class="text-sm text-gray-600 dark:text-gray-300">æˆ¿å¡å·²æ­¸é‚„</span>',
                '                        </label>',
                '                    </div>',
                '                    <button onclick="resetDailyChecks()" class="mt-3 text-xs text-blue-400 underline w-full text-right">é‡ç½®æ¯æ—¥æª¢æŸ¥</button>',
                '                </div>',
                '            </div>',
                '',
                '            ',
                '            <div class="bg-white dark:bg-kr-card-dark rounded-xl p-5 card-shadow transition-colors">',
                '                <h3 class="font-bold text-gray-800 dark:text-gray-100 mb-3">',
                '                    <i class="fas fa-language text-green-500 mr-2"></i>æ‰‹æŒ‡éŸ“èª',
                '                </h3>',
                '                ',
                '                <p class="text-xs text-gray-400 mb-2 mt-1 font-bold">åŸºç¤æœƒè©±</p>',
                '                <div class="grid grid-cols-2 gap-3 mb-4">',
                '                    <button onclick="speakKo(\'ì•ˆë…•í•˜ì„¸ìš”\', \'å®‰å¦å“ˆèª°å„ª\')" class="p-3 bg-gray-50 dark:bg-gray-700 rounded-lg text-left active:bg-gray-200 dark:active:bg-gray-600 transition">',
                '                        <div class="text-xs text-gray-400">ä½ å¥½</div>',
                '                        <div class="font-bold text-kr-blue dark:text-blue-200">ì•ˆë…•í•˜ì„¸ìš”</div>',
                '                    </button>',
                '                    <button onclick="speakKo(\'ê°ì‚¬í•©ë‹ˆë‹¤\', \'åº·æ¡‘å“ˆå’ªæ­\')" class="p-3 bg-gray-50 dark:bg-gray-700 rounded-lg text-left active:bg-gray-200 dark:active:bg-gray-600 transition">',
                '                        <div class="text-xs text-gray-400">è¬è¬</div>',
                '                        <div class="font-bold text-kr-blue dark:text-blue-200">ê°ì‚¬í•©ë‹ˆë‹¤</div>',
                '                    </button>',
                '                    <button onclick="speakKo(\'í™”ì¥ì‹¤ì€ ì–´ë””ì˜ˆìš”?\', \'èª‡å¼µæ´— æ­ä½ä¹Ÿå„ª\')" class="p-3 bg-gray-50 dark:bg-gray-700 rounded-lg text-left active:bg-gray-200 dark:active:bg-gray-600 transition">',
                '                        <div class="text-xs text-gray-400">å»æ‰€åœ¨å“ªè£¡</div>',
                '                        <div class="font-bold text-kr-blue dark:text-blue-200">í™”ì¥ì‹¤ ì–´ë””?</div>',
                '                    </button>',
                '                    <button onclick="speakKo(\'ì£„ì†¡í•©ë‹ˆë‹¤\', \'å¹æ¾å“ˆå’ªæ­\')" class="p-3 bg-gray-50 dark:bg-gray-700 rounded-lg text-left active:bg-gray-200 dark:active:bg-gray-600 transition">',
                '                        <div class="text-xs text-gray-400">ä¸å¥½æ„æ€/æŠ±æ­‰</div>',
                '                        <div class="font-bold text-kr-blue dark:text-blue-200">ì£„ì†¡í•©ë‹ˆë‹¤</div>',
                '                    </button>',
                '                </div>',
                '',
                '                <p class="text-xs text-gray-400 mb-2 font-bold">ğŸ›ï¸ è³¼ç‰©çµå¸³</p>',
                '                <div class="grid grid-cols-2 gap-3 mb-4">',
                '                    <button onclick="speakKo(\'ì´ê±° ì–¼ë§ˆì˜ˆìš”?\', \'ä»¥å‹¾ æ­é¦¬ä¹Ÿå„ª\')" class="p-3 bg-gray-50 dark:bg-gray-700 rounded-lg text-left active:bg-gray-200 dark:active:bg-gray-600 transition">',
                '                        <div class="text-xs text-gray-400">é€™å€‹å¤šå°‘éŒ¢?</div>',
                '                        <div class="font-bold text-kr-blue dark:text-blue-200 text-sm">ì–¼ë§ˆì˜ˆìš”?</div>',
                '                    </button>',
                '                    <button onclick="speakKo(\'ê¹ì•„ ì£¼ì„¸ìš”\', \'å¡å¡ æœ±èª°å„ª\')" class="p-3 bg-gray-50 dark:bg-gray-700 rounded-lg text-left active:bg-gray-200 dark:active:bg-gray-600 transition">',
                '                        <div class="text-xs text-gray-400">è«‹ç®—ä¾¿å®œä¸€é»</div>',
                '                        <div class="font-bold text-kr-blue dark:text-blue-200">ê¹ì•„ ì£¼ì„¸ìš”</div>',
                '                    </button>',
                '                    <button onclick="speakKo(\'ë´‰íˆ¬ëŠ” í•„ìš” ì—†ì–´ìš”\', \'å´©ç¦¿èƒ½ Pæºœ æ­æœå„ª\')" class="p-3 bg-gray-50 dark:bg-gray-700 rounded-lg text-left active:bg-gray-200 dark:active:bg-gray-600 transition">',
                '                        <div class="text-xs text-gray-400">ä¸ç”¨è¢‹å­</div>',
                '                        <div class="font-bold text-kr-blue dark:text-blue-200">No Bag</div>',
                '                    </button>',
                '                    <button onclick="speakKo(\'ì¹´ë“œ ë¼ìš”?\', \'å¡å˜Ÿ å°å„ª\')" class="p-3 bg-gray-50 dark:bg-gray-700 rounded-lg text-left active:bg-gray-200 dark:active:bg-gray-600 transition">',
                '                        <div class="text-xs text-gray-400">å¯ä»¥åˆ·å¡å—?</div>',
                '                        <div class="font-bold text-kr-blue dark:text-blue-200">ì¹´ë“œ ë¼ìš”?</div>',
                '                    </button>',
                '                </div>',
                '',
                '                <p class="text-xs text-gray-400 mb-2 font-bold">ğŸ½ï¸ é¤å»³ç”¨é¤</p>',
                '                <div class="grid grid-cols-2 gap-3">',
                '                    <button onclick="speakKo(\'ë©”ë‰´ ì£¼ì„¸ìš”\', \'ç¾ç´ æœ±èª°å„ª\')" class="p-3 bg-gray-50 dark:bg-gray-700 rounded-lg text-left active:bg-gray-200 dark:active:bg-gray-600 transition">',
                '                        <div class="text-xs text-gray-400">è«‹çµ¦æˆ‘èœå–®</div>',
                '                        <div class="font-bold text-kr-blue dark:text-blue-200">Menu Please</div>',
                '                    </button>',
                '                    <button onclick="speakKo(\'ë¬¼ ì¢€ ì£¼ì„¸ìš”\', \'æ…•å…’ å®— æœ±èª°å„ª\')" class="p-3 bg-gray-50 dark:bg-gray-700 rounded-lg text-left active:bg-gray-200 dark:active:bg-gray-600 transition">',
                '                        <div class="text-xs text-gray-400">è«‹çµ¦æˆ‘æ°´</div>',
                '                        <div class="font-bold text-kr-blue dark:text-blue-200">Water Please</div>',
                '                    </button>',
                '                    <button onclick="speakKo(\'ë§›ìˆì–´ìš”\', \'é¦¬è¥¿æœå„ª\')" class="p-3 bg-gray-50 dark:bg-gray-700 rounded-lg text-left active:bg-gray-200 dark:active:bg-gray-600 transition">',
                '                        <div class="text-xs text-gray-400">å¾ˆå¥½åƒ</div>',
                '                        <div class="font-bold text-kr-blue dark:text-blue-200">ë§›ìˆì–´ìš”</div>',
                '                    </button>',
                '                    <button onclick="speakKo(\'ê³„ì‚°í•´ ì£¼ì„¸ìš”\', \'Kä¸‰é»‘ æœ±èª°å„ª\')" class="p-3 bg-gray-50 dark:bg-gray-700 rounded-lg text-left active:bg-gray-200 dark:active:bg-gray-600 transition">',
                '                        <div class="text-xs text-gray-400">éº»ç…©çµå¸³</div>',
                '                        <div class="font-bold text-kr-blue dark:text-blue-200">Check Bill</div>',
                '                    </button>',
                '                </div>',
                '',
                '                <div id="speak-status" class="text-center text-xs text-gray-400 mt-2 h-4"></div>',
                '            </div>',
                '',
                '            ',
                '            <div class="bg-white dark:bg-kr-card-dark rounded-xl p-5 card-shadow transition-colors">',
                '                <h3 class="font-bold text-gray-800 dark:text-gray-100 mb-4"><i class="fas fa-exclamation-circle text-kr-red mr-2"></i>ç·Šæ€¥è¯çµ¡ & æ”¯æ´</h3>',
                '                ',
                '                <div class="grid grid-cols-2 gap-3 mb-3">',
                '                    <a href="tel:112" class="border border-gray-200 dark:border-gray-600 rounded-xl p-3 text-center active:bg-gray-50 dark:active:bg-gray-700">',
                '                        <div class="text-xs text-gray-400 mb-1">è­¦å¯Ÿ (POLICE)</div>',
                '                        <div class="text-3xl font-bold text-kr-blue">112</div>',
                '                    </a>',
                '                    <a href="tel:119" class="border border-gray-200 dark:border-gray-600 rounded-xl p-3 text-center active:bg-gray-50 dark:active:bg-gray-700">',
                '                        <div class="text-xs text-gray-400 mb-1">æ•‘è­·/ç«è­¦</div>',
                '                        <div class="text-3xl font-bold text-kr-red">119</div>',
                '                    </a>',
                '                </div>',
                '',
                '                <a href="tel:1330" class="block border border-gray-200 dark:border-gray-600 rounded-xl p-4 mb-4 active:bg-gray-50 dark:active:bg-gray-700">',
                '                    <div class="flex justify-between items-center">',
                '                        <div>',
                '                            <div class="font-bold text-gray-800 dark:text-gray-200">éŸ“åœ‹æ—…éŠè«®è©¢ç†±ç·š</div>',
                '                            <div class="text-[10px] text-gray-400 uppercase">Korea Travel Hotline</div>',
                '                            <div class="text-2xl font-bold text-gray-700 dark:text-gray-300 mt-1">1330</div>',
                '                        </div>',
                '                        <div class="w-10 h-10 bg-gray-800 text-white rounded-full flex items-center justify-center">',
                '                            <i class="fas fa-phone"></i>',
                '                        </div>',
                '                    </div>',
                '                    <div class="text-[10px] text-gray-400 mt-2">* 24å°æ™‚å°æ‡‰ (è‹±/ä¸­/éŸ“)</div>',
                '                </a>',
                '',
                '                <div class="space-y-3 pt-3 border-t border-gray-100 dark:border-gray-700">',
                '                    <p class="text-xs text-gray-400 font-bold">åœ˜é«”å°ˆå±¬è¯çµ¡äºº</p>',
                `                    <div onclick="callGuide('${data.guide.twPhone}')" class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg cursor-pointer">
                                        <div><p class="font-bold text-sm dark:text-gray-200">é ˜éšŠ ${data.guide.name}</p><p class="text-xs text-gray-400">${data.guide.twPhone}</p></div>
                                        <div class="w-8 h-8 bg-green-100 text-green-600 rounded-full flex items-center justify-center"><i class="fas fa-phone"></i></div>
                                    </div>`,
                `                    <a href="tel:${data.meeting.airportStaff ? data.meeting.airportStaff.split(' ').pop() : ''}" class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
                                        <div><p class="font-bold text-sm dark:text-gray-200">æ©Ÿå ´å°ˆå“¡</p><p class="text-xs text-gray-400">${data.meeting.airportStaff || 'ç„¡è³‡è¨Š'}</p></div>
                                        <div class="w-8 h-8 bg-green-100 text-green-600 rounded-full flex items-center justify-center"><i class="fas fa-phone"></i></div>
                                    </a>`,
                '                    <div class="p-3 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-100 dark:border-red-900">',
                '                        <p class="text-xs text-kr-red dark:text-red-400 font-bold mb-1">é§éŸ“åœ‹å°åŒ—ä»£è¡¨éƒ¨ (é¦–çˆ¾)</p>',
                '                        <a href="tel:+82263296000" class="block text-sm text-gray-700 dark:text-gray-300 mb-1">+82-2-6329-6000</a>',
                '                        <a href="tel:+821090802761" class="block text-sm font-bold text-red-600">+82-10-9080-2761 (æ€¥é›£æ•‘åŠ©)</a>',
                '                    </div>',
                '                </div>',
                '            </div>',
                '',
                '            ',
                '            <div class="bg-white dark:bg-kr-card-dark rounded-xl p-5 card-shadow transition-colors">',
                '                <h3 class="font-bold text-gray-800 dark:text-gray-100 mb-3"><i class="fas fa-coins text-yellow-500 mr-2"></i>å³æ™‚åŒ¯ç‡æ›ç®—</h3>',
                '                <div class="flex items-center space-x-2 bg-gray-50 dark:bg-gray-700 p-4 rounded-xl">',
                '                    <div class="flex-1"><label class="text-xs text-gray-400 block mb-1">éŸ“å¹£ (KRW)</label><input type="number" id="calc-jpy" placeholder="è¼¸å…¥" class="w-full bg-transparent text-xl font-bold text-gray-700 dark:text-white outline-none" oninput="convertCurrency()"></div>',
                '                    <i class="fas fa-arrow-right text-gray-300"></i>',
                '                    <div class="flex-1 text-right"><label class="text-xs text-gray-400 block mb-1">å°å¹£ (TWD)</label><div id="calc-twd" class="text-xl font-bold text-blue-500">0</div></div>',
                '                </div>',
                '                <p class="text-[10px] text-gray-400 mt-2 text-right">åŒ¯ç‡åƒè€ƒ: 1 KRW â‰ˆ <span id="calc-rate-display">...</span> TWD</p>',
                '            </div>',
                '',
                '            ',
                '            <div class="bg-white dark:bg-kr-card-dark rounded-xl p-5 card-shadow transition-colors">',
                '                <div class="flex justify-between items-center mb-3"><h3 class="font-bold text-gray-800 dark:text-gray-100"><i class="fas fa-shopping-bag text-yellow-400 mr-2"></i>è³¼ç‰©è¨˜å¸³ (ç¸½è¡¨)</h3><button onclick="resetBudget()" class="text-xs text-red-400 underline">é‡ç½®</button></div>',
                '                ',
                '                <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-xl mb-4 text-center">',
                '                    <p class="text-xs text-gray-400">ç¸½èŠ±è²» (KRW)</p><p class="text-3xl font-bold text-gray-800 dark:text-white" id="total-amount">â‚©0</p>',
                '                    <p class="text-xs text-gray-400 mt-1">ç´„å°å¹£ NT$ <span id="twd-amount">0</span></p>',
                '                </div>',
                '',
                '                <div class="flex gap-1 mb-4">',
                '                    <input type="text" id="item-name" placeholder="å–®ç­†å“é …" class="flex-[2] min-w-0 bg-gray-100 dark:bg-gray-700 dark:text-white border-none rounded-lg text-sm px-2 py-2 outline-none">',
                '                    <input type="number" id="item-qty" placeholder="x1" class="w-12 bg-gray-100 dark:bg-gray-700 dark:text-white border-none rounded-lg text-sm px-1 py-2 outline-none text-center">',
                '                    <input type="number" id="item-price" placeholder="â‚©å–®åƒ¹" class="w-20 bg-gray-100 dark:bg-gray-700 dark:text-white border-none rounded-lg text-sm px-2 py-2 outline-none">',
                '                    <button onclick="addItem()" class="bg-blue-500 text-white rounded-lg px-3 py-2"><i class="fas fa-plus"></i></button>',
                '                </div>',
                '                <ul id="budget-list" class="space-y-2 text-sm max-h-40 overflow-y-auto dark:text-gray-300"></ul>',
                '            </div>',
                '            <div class="text-center text-xs text-gray-400 py-4 pb-20">æœ¬ç¶²é æ¸¬è©¦ä¸­ï¼Œå¦‚æœ‰å‹˜èª¤è«‹ä¾ç…§ç´™æœ¬èªªæ˜æœƒè³‡æ–™ç‚ºæº–<br>ç¥æ‚¨æ—…é€”æ„‰å¿« Have a Nice Trip</div>',
                '        </div>',
                '',
                '    </main>',
                '',
                '    ',
                '    <div id="hotel-modal" class="fixed inset-0 z-[60] hidden flex items-center justify-center bg-black/80 backdrop-blur-sm p-4" onclick="closeHotelCard()">',
                '        <div class="bg-white w-full max-w-sm rounded-2xl p-6 text-center shadow-2xl relative" onclick="event.stopPropagation()">',
                '            <button onclick="closeHotelCard()" class="absolute top-4 right-4 text-gray-400 text-2xl">&times;</button>',
                '            <p class="text-xs text-gray-400 mb-2 uppercase tracking-widest">Driver Card</p>',
                '            <div class="border-2 border-kr-blue p-4 rounded-xl">',
                '                <p class="text-sm text-gray-500 mb-1">ê¸°ì‚¬ë‹˜, ì—¬ê¸°ë¡œ ê°€ì£¼ì„¸ìš”</p>',
                '                <h2 class="text-xl font-black text-kr-blue mb-4 leading-relaxed" id="modal-hotel-name"></h2>',
                '                <hr class="border-dashed border-gray-300 my-3">',
                '                <p class="text-left text-sm font-bold text-gray-700"><span id="modal-hotel-addr"></span></p>',
                '                <p class="text-left text-xs text-gray-400 mt-1">TEL: <span id="modal-hotel-tel"></span></p>',
                '            </div>',
                '            <p class="text-xs text-gray-400 mt-4">(é»æ“ŠèƒŒæ™¯é—œé–‰)</p>',
                '        </div>',
                '    </div>',
                '',
                '    <script>',
                `        // Data Injection`,
                `        const TRIP_DATA = ${jsonStr};`,
                '',
                '        // --- UI Switching ---',
                '        function switchTab(tabName) {',
                '            [\'itinerary\', \'info\', \'tools\'].forEach(t => {',
                '                document.getElementById(\'view-\'+t).classList.add(\'hidden\');',
                '                document.getElementById(\'btn-\'+t).className = \'flex-1 py-3 text-sm tab-inactive transition-all\';',
                '            });',
                '            document.getElementById(\'view-\'+tabName).classList.remove(\'hidden\');',
                '            document.getElementById(\'btn-\'+tabName).className = \'flex-1 py-3 text-sm tab-active transition-all\';',
                '            document.getElementById(\'main-content\').scrollTop = 0;',
                '        }',
                '',
                '        // Toggle Spot Detail',
                '        function toggleDetail(el) {',
                '            const content = el.querySelector(\'.detail-content\');',
                '            const icon = el.querySelector(\'.fa-chevron-down\');',
                '            if (content) {',
                '                if (content.classList.contains(\'hidden\')) {',
                '                    content.classList.remove(\'hidden\');',
                '                    if(icon) icon.classList.add(\'rotate-180\');',
                '                } else {',
                '                    content.classList.add(\'hidden\');',
                '                    if(icon) icon.classList.remove(\'rotate-180\');',
                '                }',
                '            }',
                '        }',
                '',
                '        // --- Hotel Modal ---',
                '        function showHotelCard(name, tel, addr, dayLabel) {',
                '             if(!addr) return; // double check logic',
                '             document.getElementById(\'modal-hotel-name\').innerHTML = name.replace(/é£¯åº—/g, \'\') + \'<br><span class="text-sm font-normal text-gray-500">(\' + dayLabel + \')</span>\';',
                '             document.getElementById(\'modal-hotel-tel\').innerText = tel;',
                '             document.getElementById(\'modal-hotel-addr\').innerText = addr;',
                '             document.getElementById(\'hotel-modal\').classList.remove(\'hidden\');',
                '        }',
                '        function closeHotelCard() { document.getElementById(\'hotel-modal\').classList.add(\'hidden\'); }',
                '',
                '        // --- Weather Logic ---',
                '        let headerResizeObserver = null;',
                '        async function fetchWeather() {',
                '            try {',
                '                initDynamicPadding();',
                '                if (navigator.geolocation) {',
                '                    navigator.geolocation.getCurrentPosition(',
                '                        async (p) => {',
                '                             try {',
                '                                 const res = await fetch(\`https://api.open-meteo.com/v1/forecast?latitude=\${p.coords.latitude}&longitude=\${p.coords.longitude}&current=temperature_2m&timezone=Asia%2FSeoul\`);',
                '                                 const d = await res.json();',
                '                                 if(d.current) document.getElementById(\'header-weather\').innerHTML = \`\${Math.round(d.current.temperature_2m)}<span class="text-sm">Â°C</span>\`;',
                '                                 document.getElementById(\'location-label\').innerHTML = \'<i class="fas fa-map-marker-alt mr-1"></i>æ‰€åœ¨åœ°å³æ™‚\';',
                '                             } catch(e){}',
                '                        }',
                '                    );',
                '                }',
                '                const now = new Date(); now.setHours(0,0,0,0);',
                '                const tripDate = new Date(TRIP_DATA.meeting.date); tripDate.setHours(0,0,0,0); tripDate.setDate(tripDate.getDate() - 1);',
                '                if (now < tripDate) {',
                '                     TRIP_DATA.days.forEach((_, idx) => {',
                '                         const el = document.getElementById(\'weather-stats-\'+idx);',
                '                         if(el) el.innerHTML = \'<span class="text-xs text-gray-400">å¤©æ°£é å ±å°‡æ–¼å‡ºç™¼å‰1å¤©é¡¯ç¤º</span>\';',
                '                     });',
                '                     return;',
                '                }',
                '            } catch(e){}',
                '            TRIP_DATA.days.forEach(async (day, idx) => {',
                '                if(!day.lat) return;',
                '                try {',
                '                    const res = await fetch(\`https://api.open-meteo.com/v1/forecast?latitude=\${day.lat}&longitude=\${day.lon}&daily=precipitation_probability_max,temperature_2m_max,temperature_2m_min,uv_index_max,weather_code&timezone=Asia%2FSeoul&forecast_days=1\`);',
                '                    const d = await res.json();',
                '                    let aqi = \'-\';',
                '                    try {',
                '                        const aqiRes = await fetch(\`https://air-quality-api.open-meteo.com/v1/air-quality?latitude=\${day.lat}&longitude=\${day.lon}&daily=us_aqi_max&timezone=Asia%2FSeoul&forecast_days=1\`);',
                '                        const aqiData = await aqiRes.json();',
                '                        if (aqiData.daily && aqiData.daily.us_aqi_max) { aqi = aqiData.daily.us_aqi_max[0]; }',
                '                    } catch (aqiErr) {}',
                '                    if(d.daily) {',
                '                        const rain = d.daily.precipitation_probability_max[0];',
                '                        const max = Math.round(d.daily.temperature_2m_max[0]);',
                '                        const min = Math.round(d.daily.temperature_2m_min[0]);',
                '                        const uv = d.daily.uv_index_max[0];',
                '                        const wCode = d.daily.weather_code[0];',
                '                        let aqiColor = "text-green-500"; if(aqi > 50) aqiColor = "text-yellow-500"; if(aqi > 100) aqiColor = "text-orange-500"; if(aqi > 150) aqiColor = "text-red-500";',
                '                        const html = \`<div class="flex gap-3 text-xs w-full"><div class="flex items-center gap-1"><span class="text-red-400 font-bold">æœ€é«˜</span> \${max}Â°</div><div class="flex items-center gap-1"><span class="text-blue-400 font-bold">æœ€ä½</span> \${min}Â°</div><div class="flex items-center gap-1"><i class="fas fa-umbrella text-blue-300"></i> \${rain}%</div></div><div class="flex gap-3 text-[10px] w-full mt-1 opacity-80"><div><i class="fas fa-sun text-orange-400"></i> UV: \${uv}</div><div class="\${aqiColor} font-bold"><i class="fas fa-wind"></i> AQI: \${aqi}</div></div>\`;',
                '                        document.getElementById(\'weather-stats-\'+idx).innerHTML = html;',
                '                        let wIcon = \'<i class="fas fa-sun text-orange-400"></i>\'; if (wCode >= 1 && wCode <= 3) wIcon = \'<i class="fas fa-cloud-sun text-gray-400"></i>\'; else if (wCode >= 45 && wCode <= 48) wIcon = \'<i class="fas fa-smog text-gray-500"></i>\'; else if (wCode >= 51 && wCode <= 67) wIcon = \'<i class="fas fa-cloud-rain text-blue-400"></i>\'; else if (wCode >= 71 && wCode <= 77) wIcon = \'<i class="fas fa-snowflake text-blue-300"></i>\'; else if (wCode >= 80 && wCode <= 82) wIcon = \'<i class="fas fa-cloud-showers-heavy text-blue-500"></i>\'; else if (wCode >= 95) wIcon = \'<i class="fas fa-bolt text-yellow-500"></i>\';',
                '                        document.getElementById(\'weather-icon-\'+idx).innerHTML = wIcon;',
                '                    }',
                '                } catch(e){ console.error(e); }',
                '            });',
                '        }',
                '',
                '        function initDynamicPadding() {',
                '            const header = document.getElementById(\'app-header\');',
                '            const main = document.getElementById(\'main-content\');',
                '            if (!header || !main) return;',
                '            const updatePadding = () => {',
                '                const height = header.offsetHeight;',
                '                main.style.paddingTop = (height + 15) + \'px\';',
                '            };',
                '            updatePadding();',
                '            if (headerResizeObserver) { headerResizeObserver.disconnect(); }',
                '            headerResizeObserver = new ResizeObserver(updatePadding);',
                '            headerResizeObserver.observe(header);',
                '            window.addEventListener(\'resize\', updatePadding);',
                '        }',
                '',
                '        // --- Checklist Logic ---',
                '        function initChecklist() {',
                '            document.querySelectorAll(\'input[type="checkbox"]\').forEach(el => {',
                '                if(localStorage.getItem(el.id) === \'true\') el.checked = true;',
                '            });',
                '        }',
                '        function saveCheck(id) {',
                '            localStorage.setItem(id, document.getElementById(id).checked);',
                '        }',
                '        function resetDailyChecks() {',
                '            document.querySelectorAll(\'input[type="checkbox"][id^="daily_"]\').forEach(chk => {',
                '                chk.checked = false;',
                '                localStorage.setItem(chk.id, \'false\');',
                '            });',
                '            alert(\'æ¯æ—¥æª¢æŸ¥æ¸…å–®å·²é‡ç½®ï¼\');',
                '        }',
                '',
                '        // --- Currency Logic ---',
                '        let currentRate = 0.024;',
                '        async function fetchRate() {',
                '            try {',
                '                const res = await fetch(\'https://api.exchangerate-api.com/v4/latest/KRW\');',
                '                const data = await res.json();',
                '                if(data.rates.TWD) {',
                '                    currentRate = data.rates.TWD;',
                '                    document.getElementById(\'calc-rate-display\').innerText = currentRate.toFixed(4);',
                '                    renderBudget();',
                '                    convertCurrency();',
                '                }',
                '            } catch(e){}',
                '        }',
                '        function convertCurrency() {',
                '            const krw = parseFloat(document.getElementById(\'calc-jpy\').value);',
                '            if(!isNaN(krw)) {',
                '                document.getElementById(\'calc-twd\').innerText = Math.round(krw * currentRate).toLocaleString();',
                '            } else {',
                '                document.getElementById(\'calc-twd\').innerText = \'0\';',
                '            }',
                '        }',
                '',
                '        // --- Budget Logic ---',
                '        let items = [];',
                '        try { const saved = localStorage.getItem(\'trip_budget_kr\'); if (saved) items = JSON.parse(saved); } catch (e) {}',
                '        function getIntVal(id, def = 1) { const val = document.getElementById(id).value; return val ? parseInt(val) : def; }',
                '        function renderBudget() {',
                '            const list = document.getElementById(\'budget-list\'); if(!list) return;',
                '            list.innerHTML = \'\'; let total = 0;',
                '            items.forEach((item, index) => {',
                '                const qty = item.qty || 1; const rowTotal = item.price * qty; total += rowTotal;',
                '                list.innerHTML += \`<li class="flex justify-between items-center border-b border-gray-50 dark:border-gray-700 pb-1"><span class="text-gray-600 dark:text-gray-300">\${item.name} <span class="text-xs text-gray-400">x\${qty}</span></span><div class="flex items-center gap-2"><span class="font-medium text-gray-800 dark:text-gray-200">â‚©\${rowTotal.toLocaleString()}</span><button onclick="deleteItem(\${index})" class="text-gray-300 hover:text-red-400"><i class="fas fa-times"></i></button></div></li>\`;',
                '            });',
                '            document.getElementById(\'total-amount\').innerText = \'â‚©\' + total.toLocaleString();',
                '            document.getElementById(\'twd-amount\').innerText = Math.round(total * currentRate).toLocaleString();',
                '            try { localStorage.setItem(\'trip_budget_kr\', JSON.stringify(items)); } catch(e) {}',
                '        }',
                '        function addItem() {',
                '            const name = document.getElementById(\'item-name\').value; const price = parseInt(document.getElementById(\'item-price\').value); const qty = getIntVal(\'item-qty\', 1);',
                '            if (name && price) { items.push({ name, price, qty }); document.getElementById(\'item-name\').value = \'\'; document.getElementById(\'item-price\').value = \'\'; document.getElementById(\'item-qty\').value = \'\'; renderBudget(); }',
                '        }',
                '        function deleteItem(idx) { items.splice(idx, 1); renderBudget(); }',
                '        function resetBudget() { if(confirm(\'æ¸…ç©ºè¨˜å¸³ï¼Ÿ\')) { items = []; renderBudget(); } }',
                '',
                '        // --- Speech Logic ---',
                '        function speakKo(text, romaji) {',
                '            if (\'speechSynthesis\' in window) {',
                '                const u = new SpeechSynthesisUtterance(text); u.lang = \'ko-KR\'; u.rate = 0.9;',
                '                document.getElementById(\'speak-status\').innerText = \`ğŸ”Š æ’­æ”¾ä¸­: \${romaji}\`;',
                '                u.onend = function() { document.getElementById(\'speak-status\').innerText = \'\'; };',
                '                window.speechSynthesis.speak(u);',
                '            }',
                '        }',
                '        function callGuide(phone) { window.location.href = \'tel:\' + phone; }',
                '',
                '        // Init Calls',
                '        fetchWeather(); fetchRate(); initChecklist(); renderBudget(); initDynamicPadding();',
                '    <\/script>',
                '</body>',
                '</html>'
            ];

            return htmlParts.join('\n');
        }

        const GeneratorApp = () => {
            const [data, setData] = useState(DEFAULT_DATA);
            const [status, setStatus] = useState("");
            const [pdfUrl, setPdfUrl] = useState(null); 
            const [rightTab, setRightTab] = useState('preview');

            const updateData = (field, value) => setData(prev => ({ ...prev, [field]: value }));
            const updateInfo = (field, value) => setData(prev => ({ ...prev, info: { ...prev.info, [field]: value } }));
            
            const updateFlight = (idx, field, value) => {
                const newF = [...data.flights];
                newF[idx][field] = value;
                setData(prev => ({ ...prev, flights: newF }));
            };

            const updateDay = (idx, field, value) => {
                const newDays = [...data.days];
                if(field === 'meals') {
                    newDays[idx].meals = { ...newDays[idx].meals, ...value };
                } else {
                    newDays[idx][field] = value;
                }
                if(field === 'location' && CITIES[value]) {
                    newDays[idx].lat = CITIES[value].lat;
                    newDays[idx].lon = CITIES[value].lon;
                }
                setData({ ...data, days: newDays });
            };

            const updateDaySpot = (dayIdx, spotIdx, field, value) => {
                const newDays = [...data.days];
                newDays[dayIdx].spots[spotIdx][field] = value;
                setData({ ...data, days: newDays });
            };

            const addSpot = (dayIdx) => {
                const newDays = [...data.days];
                newDays[dayIdx].spots.push({ name: "æ–°æ™¯é»", desc: "è«‹è¼¸å…¥ä»‹ç´¹" });
                setData({ ...data, days: newDays });
            };

            const removeSpot = (dayIdx, spotIdx) => {
                const newDays = [...data.days];
                newDays[dayIdx].spots.splice(spotIdx, 1);
                setData({ ...data, days: newDays });
            };
            
            const addDay = () => {
                const newDays = [...data.days];
                const nextDayNum = newDays.length + 1;
                newDays.push({
                    day: nextDayNum, date: "", location: "æ¿Ÿå·", lat: 33.49, lon: 126.53, spots: [],
                    meals: { b: "", l: "", d: "" }, hotel: "", hotelTel: "", hotelAddress: ""
                });
                setData({ ...data, days: newDays });
            };

            const removeDay = (idx) => {
                if (data.days.length <= 1) return;
                if (confirm(`ç¢ºå®šåˆªé™¤ Day ${data.days[idx].day}?`)) {
                    const newDays = data.days.filter((_, i) => i !== idx).map((d, i) => ({ ...d, day: i + 1 }));
                    setData({ ...data, days: newDays });
                }
            };

            // PDF Parsing Logic
            const handlePdf = async (e) => {
                const file = e.target.files[0];
                if(!file) return;
                
                const url = URL.createObjectURL(file);
                setPdfUrl(url);
                setRightTab('pdf'); 

                setStatus("è§£æ PDF è³‡æ–™ä¸­...");
                
                const ab = await file.arrayBuffer();
                const pdf = await pdfjsLib.getDocument(ab).promise;
                let fullText = "";
                
                for(let i=1; i<=pdf.numPages; i++) {
                    const p = await pdf.getPage(i);
                    const t = await p.getTextContent();
                    fullText += t.items.map(s => s.str).join(" ") + "\n"; 
                }

                // Remove Entry Card tutorial junk
                if(fullText.includes("é›»å­å…¥å¢ƒå¡å¡«å¯«æ•™å­¸")) {
                    fullText = fullText.split("é›»å­å…¥å¢ƒå¡å¡«å¯«æ•™å­¸")[0] + "é›»å­å…¥å¢ƒå¡"; 
                } else if (fullText.includes("å¡«å¯«ç¶²å€")) {
                     fullText = fullText.split("å¡«å¯«ç¶²å€")[0];
                }

                const newData = {...data};

                // Basic Info
                const codeMatch = fullText.match(/(?:åœ˜è™Ÿ|ç·¨è™Ÿ)[:ï¼š\s]*([A-Z0-9]+)/i);
                if(codeMatch) newData.tripCode = codeMatch[1].trim();

                const nameLines = fullText.split('\n').slice(0, 5);
                const nameMatch = nameLines.find(l => (l.includes("æ—…éŠ") || l.includes("å¤©")) && !l.includes("å…¨æ–¹ä½"));
                if(nameMatch) newData.tripName = nameMatch.trim();

                const guideMatch = fullText.match(/é ˜éšŠ[:ï¼š\s]*([^\s0-9]+)/);
                if(guideMatch) newData.guide.name = guideMatch[1].replace(/[\u3000\så°å§å…ˆç”Ÿ]/g, '').trim();
                
                const phoneMatch = fullText.match(/(09\d{2}-?\d{6})/);
                if(phoneMatch) newData.guide.twPhone = phoneMatch[1].trim();

                const meetTimeMatch = fullText.match(/é›†åˆæ™‚é–“[:ï¼š\s]*([^\n]+)/);
                if(meetTimeMatch) newData.meeting.time = meetTimeMatch[1].replace(/^\s*[:ï¼š]\s*/, '').trim();
                
                const meetLocMatch = fullText.match(/é›†åˆåœ°é»[:ï¼š\s]*([^\n]+)/);
                if(meetLocMatch) newData.meeting.location = meetLocMatch[1].trim();
                
                const staffMatch = fullText.match(/æ©Ÿå ´é€æ©Ÿäººå“¡[:ï¼š\s]*([^\n]+)/);
                if(staffMatch) newData.meeting.airportStaff = staffMatch[1].trim();

                // Flights
                const flightRegex = /([A-Z]{2}\s?\d{3,4})\s*(\d{2}:\d{2}.\d{2}:\d{2})/g;
                const flightsFound = [...fullText.matchAll(flightRegex)];
                
                if(flightsFound.length > 0) {
                    const f1 = flightsFound[0];
                    const times1 = f1[2].split(/[\/~]/);
                    newData.flights[0] = {
                        type: "å»ç¨‹", airline: getAirlineName(f1[1]), code: f1[1].replace(/\s/g, ''),
                        date: "DAY 1", 
                        depTime: times1[0], depAirport: "æ¡ƒåœ’",
                        arrTime: times1[1].slice(-5), arrAirport: "æ¿Ÿå·"
                    };

                    if(flightsFound.length > 1) {
                        const f2 = flightsFound[1];
                        const times2 = f2[2].split(/[\/~]/);
                        newData.flights[1] = {
                            type: "å›ç¨‹", airline: getAirlineName(f2[1]), code: f2[1].replace(/\s/g, ''),
                            date: "DAY 5",
                            depTime: times2[0], depAirport: "æ¿Ÿå·",
                            arrTime: times2[1].slice(-5), arrAirport: "æ¡ƒåœ’"
                        };
                    }
                }

                // Days Logic
                const dateRegex = /(\d{2}\/\d{2})/g;
                let datesFound = [...fullText.matchAll(dateRegex)].map(m => ({ date: m[1], index: m.index }));
                
                const uniqueDates = [];
                if(datesFound.length > 0) {
                    uniqueDates.push(datesFound[0]);
                    for(let i=1; i<datesFound.length; i++) {
                        if(datesFound[i].index - datesFound[i-1].index > 50 || datesFound[i].date !== datesFound[i-1].date) {
                            uniqueDates.push(datesFound[i]);
                        }
                    }
                }

                if(uniqueDates.length > 0) {
                    const year = new Date().getFullYear();
                    newData.meeting.date = `${year}/${uniqueDates[0].date}`;
                    newData.flights[0].date = uniqueDates[0].date;
                    if(uniqueDates.length > 1) newData.flights[1].date = uniqueDates[uniqueDates.length-1].date;

                    const newDays = [];
                    for(let i=0; i<uniqueDates.length; i++) {
                        const current = uniqueDates[i];
                        const next = uniqueDates[i+1];
                        const startIdx = current.index;
                        const endIdx = next ? next.index : fullText.length;
                        let dayBlock = fullText.substring(startIdx, endIdx);

                        let itineraryText = dayBlock;
                        const spotsRaw = itineraryText.split(/ä½å®¿|æ—©é¤|ä¸­é¤|åˆé¤|æ™šé¤/)[0]; 
                        
                        const spots = [];
                        if(spotsRaw.includes('â†’')) {
                            const rawSpots = spotsRaw.split('â†’');
                            rawSpots.forEach(s => {
                                let name = s.replace(/\d{2}\/\d{2}|è¡Œç¨‹å…§å®¹|ã€|ã€‘/g, '').trim();
                                if(name && name.length > 2 && !name.includes("æ¡ƒåœ’") && !name.includes("ç­æ©Ÿæ™‚åˆ»")) {
                                    spots.push({ name: name, desc: "" });
                                }
                            });
                        } 
                        const bracketSpots = [...dayBlock.matchAll(/ã€([^ã€‘]+)ã€‘/g)];
                        if(bracketSpots.length > 0 && spots.length === 0) {
                             bracketSpots.forEach(m => spots.push({ name: m[1], desc: "" }));
                        }

                        let meals = { b: "", l: "", d: "" };
                        const bMatch = dayBlock.match(/æ—©é¤[:ï¼š]([^\n]+)/);
                        const lMatch = dayBlock.match(/(?:ä¸­é¤|åˆé¤)[:ï¼š]([^\n]+)/);
                        const dMatch = dayBlock.match(/æ™šé¤[:ï¼š]([^\n]+)/);
                        
                        if(bMatch) meals.b = bMatch[1].trim();
                        if(lMatch) meals.l = lMatch[1].trim();
                        if(dMatch) meals.d = dMatch[1].trim();

                        let hotel = "è«‹åƒé–±ç¢ºèªå–®";
                        let hotelTel = "";
                        const hotelMatch = dayBlock.match(/ä½å®¿[:ï¼š]([^\n]+)/);
                        if(hotelMatch) {
                            const hotelRaw = hotelMatch[1].trim();
                            const telMatch = hotelRaw.match(/[\d-]{8,}/);
                            if(telMatch) {
                                hotelTel = telMatch[0];
                                hotel = hotelRaw.replace(telMatch[0], '').trim();
                            } else {
                                hotel = hotelRaw;
                            }
                        }

                        newDays.push({
                            day: i + 1,
                            date: current.date,
                            location: "æ¿Ÿå·",
                            lat: 33.49, lon: 126.53,
                            spots: spots.length > 0 ? spots : [{ name: "è¡Œç¨‹è±å¯Œ", desc: "è©³è¦‹èªªæ˜æœƒè³‡æ–™" }],
                            meals: meals,
                            hotel: hotel,
                            hotelTel: hotelTel,
                            hotelAddress: ""
                        });
                    }
                    newData.days = newDays;
                }

                setData(newData);
                setStatus("PDF è§£æå®Œæˆï¼è«‹æª¢æŸ¥ä¸¦å¾®èª¿å…§å®¹");
            };
            
            function getAirlineName(code) {
                if(code.includes('IT')) return 'å°ç£è™èˆª';
                if(code.includes('KE')) return 'å¤§éŸ“èˆªç©º';
                if(code.includes('OZ')) return 'éŸ“äºèˆªç©º';
                if(code.includes('LJ')) return 'çœŸèˆªç©º';
                if(code.includes('7C')) return 'æ¿Ÿå·èˆªç©º';
                if(code.includes('TW')) return 'å¾·å¨èˆªç©º';
                return code;
            }

            const download = () => {
                const html = getClientHtml(data);
                const blob = new Blob([html], {type: 'text/html'});
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `è¡Œç¨‹App(éŸ“åœ‹)_${data.tripName || 'æœªå‘½å'}.html`;
                document.body.appendChild(a);
                a.click();
            };

            return (
                <div className="flex h-screen bg-gray-100">
                    <div className="w-1/2 p-8 overflow-y-auto bg-white shadow-xl z-10">
                        <h1 className="text-3xl font-bold text-gray-800 mb-2">èªªæ˜æœƒç”¢ç”Ÿå™¨ (å…¨æ–¹ä½ç‰ˆ)</h1>
                        <p className="text-sm text-gray-500 mb-6">æ”¯æ´ PDF è‡ªå‹•è§£æèˆ‡é›»å­å…¥å¢ƒå¡æ•™å­¸é€£çµ</p>

                        <div className="mb-6">
                            <div className="bg-blue-50 border border-blue-200 p-4 rounded-xl">
                                <h3 className="font-bold text-blue-800 mb-2"><i className="fas fa-file-pdf"></i> ä¸Šå‚³èªªæ˜æœƒè³‡æ–™ (PDF)</h3>
                                <input type="file" accept=".pdf" onChange={handlePdf} className="text-sm w-full" />
                            </div>
                        </div>

                        {status && <div className="bg-yellow-50 text-yellow-700 p-2 rounded mb-4 text-sm text-center font-bold animate-pulse">{status}</div>}

                        <hr className="my-6 border-gray-200" />
                        
                        {/* é ˆçŸ¥ç·¨è¼¯å€ (å«å…¥å¢ƒå¡è¨­å®š) */}
                        <div className="mb-6 border p-4 rounded-xl bg-purple-50">
                            <h3 className="font-bold text-purple-800 mb-2"><i class="fas fa-info-circle"></i> é ˆçŸ¥å…§å®¹ç·¨è¼¯</h3>
                            <div className="space-y-3">
                                <div><label className="text-xs font-bold text-gray-500">å¤©æ°£èˆ‡ç©¿è‘—</label><textarea rows="2" value={data.info.weather} onChange={e=>updateInfo('weather', e.target.value)} className="w-full border rounded p-1 text-sm"></textarea></div>
                                <div><label className="text-xs font-bold text-gray-500">è²¨å¹£åŒ¯ç‡</label><textarea rows="2" value={data.info.currency} onChange={e=>updateInfo('currency', e.target.value)} className="w-full border rounded p-1 text-sm"></textarea></div>
                                
                                <div className="p-3 border border-blue-300 bg-blue-50 rounded">
                                    <label className="text-xs font-bold text-blue-700 mb-1 block">é›»å­å…¥å¢ƒå¡è¨­å®š</label>
                                    <p className="text-[10px] text-gray-500 mb-1">å®˜æ–¹ç”³è«‹é€£çµå·²å…§å»ºï¼Œè«‹å¡«å¯«æ•™å­¸ PDF çš„ä¸‹è¼‰ç¶²å€ã€‚</p>
                                    <input value={data.info.entryCardTutorialUrl} onChange={e=>updateInfo('entryCardTutorialUrl', e.target.value)} className="w-full border p-1 rounded text-sm" placeholder="https://example.com/tutorial.pdf" />
                                </div>

                                <div className="p-2 border border-yellow-300 bg-yellow-50 rounded">
                                    <label className="text-xs font-bold text-yellow-700 mb-1 block">æœå‹™è²»è¨­å®š</label>
                                    <div className="flex gap-2">
                                        <input type="text" value={data.info.tips.currency} onChange={e=>updateInfo('tips', {...data.info.tips, currency: e.target.value})} className="border p-1 rounded text-xs w-1/3" placeholder="å¹£åˆ¥" />
                                        <input type="number" value={data.info.tips.perDay} onChange={e=>updateInfo('tips', {...data.info.tips, perDay: parseInt(e.target.value) || 0})} className="border p-1 rounded text-xs w-1/3" placeholder="æ¯æ—¥é‡‘é¡" />
                                        <input type="number" value={data.info.tips.days} onChange={e=>updateInfo('tips', {...data.info.tips, days: parseInt(e.target.value) || 0})} className="border p-1 rounded text-xs w-1/3" placeholder="å¤©æ•¸" />
                                    </div>
                                </div>

                                <div>
                                    <label className="text-xs font-bold text-gray-500 text-pink-600">åœ–ç‰‡ç¶²å€ / æ³¨æ„äº‹é …åœ–ç‰‡</label>
                                    <textarea rows="2" value={data.info.imageRoot} onChange={e=>updateInfo('imageRoot', e.target.value)} className="w-full border border-pink-200 rounded p-1 text-sm text-pink-600" placeholder="imgs/1.jpg"></textarea>
                                </div>
                                <div>
                                    <label className="text-xs font-bold text-gray-500 text-blue-600">ç´™æœ¬èªªæ˜æœƒ PDF ä¸‹è¼‰è·¯å¾‘</label>
                                    <input value={data.info.pdfPath} onChange={e=>updateInfo('pdfPath', e.target.value)} className="w-full border border-blue-200 rounded p-1 text-sm text-blue-600" placeholder="briefing.pdf" />
                                </div>
                            </div>
                        </div>

                        {/* åŸºæœ¬è³‡æ–™ç·¨è¼¯å€ */}
                        <div className="mb-6 border p-4 rounded-xl bg-indigo-50">
                            <h3 className="font-bold text-indigo-800 mb-2">åŸºæœ¬è³‡æ–™å¾®èª¿</h3>
                            <div className="mb-3">
                                <label className="text-xs text-gray-500 font-bold block mb-1">åœ˜é«”åç¨±</label>
                                <input value={data.tripName} onChange={e=>updateData('tripName', e.target.value)} className="border p-1 rounded text-sm w-full font-bold" placeholder="åœ˜é«”åç¨±" />
                            </div>
                            <div className="grid grid-cols-2 gap-2">
                                <div>
                                    <label className="text-xs text-gray-500 font-bold block mb-1">åœ˜è™Ÿ</label>
                                    <input value={data.tripCode} onChange={e=>updateData('tripCode', e.target.value)} className="border p-1 rounded text-sm w-full" placeholder="åœ˜è™Ÿ" />
                                </div>
                                <div>
                                    <label className="text-xs text-gray-500 font-bold block mb-1">å‡ºç™¼æ—¥æœŸ</label>
                                    <input value={data.meeting.date} onChange={e=>updateData('meeting', {...data.meeting, date: e.target.value})} className="border p-1 rounded text-sm w-full" placeholder="YYYY/MM/DD" />
                                </div>
                            </div>
                        </div>
                        
                        {/* é›†åˆè³‡è¨Šç·¨è¼¯å€ */}
                        <div className="mb-6 border p-4 rounded-xl bg-gray-50">
                            <h3 className="font-bold text-gray-700 mb-2">é›†åˆè³‡è¨Šå¾®èª¿</h3>
                            <div className="grid grid-cols-2 gap-2 mb-2">
                                <input value={data.meeting.time} onChange={e=>updateData('meeting', {...data.meeting, time: e.target.value})} className="border p-1 rounded text-sm" placeholder="é›†åˆæ™‚é–“" />
                                <input value={data.meeting.badge} onChange={e=>updateData('meeting', {...data.meeting, badge: e.target.value})} className="border p-1 rounded text-sm" placeholder="è­˜åˆ¥ç‰Œé¡è‰²" />
                            </div>
                            <textarea value={data.meeting.location} onChange={e=>updateData('meeting', {...data.meeting, location: e.target.value})} className="border p-1 rounded text-sm w-full mb-2 h-16 resize-none" placeholder="é›†åˆåœ°é»"></textarea>
                            <div className="grid grid-cols-2 gap-2">
                                <input value={data.guide.name} onChange={e=>updateData('guide', {...data.guide, name: e.target.value})} className="border p-1 rounded text-sm w-full" placeholder="é ˜éšŠå§“å" />
                                <input value={data.guide.twPhone} onChange={e=>updateData('guide', {...data.guide, twPhone: e.target.value})} className="border p-1 rounded text-sm w-full" placeholder="é ˜éšŠé›»è©±" />
                            </div>
                            <div className="grid grid-cols-2 gap-2 mt-2">
                                <label className="text-xs text-gray-500 font-bold block mb-1 col-span-2">æ©Ÿå ´å°ˆå“¡</label>
                                <input value={data.meeting.airportStaff} onChange={e=>updateData('meeting', {...data.meeting, airportStaff: e.target.value})} className="border p-1 rounded text-sm w-full col-span-2" placeholder="ä¾‹å¦‚: æ›¾ä»æ° 0910-008-139" />
                            </div>
                        </div>

                        {/* èˆªç­è©³ç´°ç·¨è¼¯å€ */}
                        <div className="mb-6 border p-4 rounded-xl bg-blue-50">
                            <h3 className="font-bold text-blue-800 mb-2"><i className="fas fa-plane"></i> èˆªç­è³‡è¨Šè©³å¡«</h3>
                            {data.flights.map((f, idx) => (
                                <div key={idx} className="mb-3 border-b pb-2 last:border-0">
                                    <div className="flex justify-between font-bold text-sm mb-1">{f.type}</div>
                                    <div className="grid grid-cols-2 gap-2 text-xs">
                                        <input value={f.code} onChange={e=>updateFlight(idx, 'code', e.target.value)} className="border p-1 rounded font-bold text-blue-600" placeholder="èˆªç­ä»£è™Ÿ" />
                                        <input value={f.date} onChange={e=>updateFlight(idx, 'date', e.target.value)} className="border p-1 rounded" placeholder="æ—¥æœŸ" />
                                        <input value={f.depTime} onChange={e=>updateFlight(idx, 'depTime', e.target.value)} className="border p-1 rounded" placeholder="å‡ºç™¼æ™‚é–“" />
                                        <input value={f.depAirport} onChange={e=>updateFlight(idx, 'depAirport', e.target.value)} className="border p-1 rounded" placeholder="å‡ºç™¼æ©Ÿå ´" />
                                        <input value={f.arrTime} onChange={e=>updateFlight(idx, 'arrTime', e.target.value)} className="border p-1 rounded" placeholder="æŠµé”æ™‚é–“" />
                                        <input value={f.arrAirport} onChange={e=>updateFlight(idx, 'arrAirport', e.target.value)} className="border p-1 rounded" placeholder="æŠµé”æ©Ÿå ´" />
                                    </div>
                                </div>
                            ))}
                        </div>

                        <div className="space-y-6">
                            {data.days.map((day, dIdx) => (
                                <div key={dIdx} className="border p-4 rounded-xl bg-gray-50 hover:bg-white transition-shadow shadow-sm">
                                    <div className="flex justify-between items-center mb-3 border-b pb-2">
                                        <div className="flex gap-2 items-center flex-1">
                                            <span className="bg-blue-600 text-white px-2 py-1 rounded text-xs font-bold">Day {day.day}</span>
                                            <input value={day.date} onChange={e=>updateDay(dIdx, 'date', e.target.value)} className="border p-1 rounded text-sm w-16 text-center font-bold text-gray-500" placeholder="æ—¥æœŸ" />
                                            <div className="flex gap-1 flex-1">
                                                <select value={Object.keys(CITIES).find(k=>CITIES[k].lat===day.lat) || ''} onChange={e=>updateDay(dIdx, 'location', e.target.value)} className="border p-1 rounded text-sm bg-orange-50 font-bold text-orange-700 w-24">
                                                    {Object.keys(CITIES).map(c=><option key={c} value={c}>{c}</option>)}
                                                </select>
                                                <input value={day.location} onChange={e=>updateDay(dIdx, 'location', e.target.value)} className="border p-1 rounded text-sm w-full" placeholder="è‡ªè¨‚åœ°é»" />
                                            </div>
                                        </div>
                                        <div className="flex items-center gap-1 ml-2">
                                            <button onClick={()=>addSpot(dIdx)} className="text-xs bg-green-100 text-green-700 px-2 py-1 rounded hover:bg-green-200"><i className="fas fa-plus"></i></button>
                                            <button onClick={()=>removeDay(dIdx)} className="text-xs bg-red-100 text-red-700 px-2 py-1 rounded hover:bg-red-200"><i className="fas fa-trash"></i></button>
                                        </div>
                                    </div>
                                    
                                    {/* é¤é£Ÿå¾®èª¿ */}
                                    <div className="grid grid-cols-3 gap-2 mb-3 text-xs">
                                        <div><label className="text-gray-400 block mb-1">æ—©é¤</label><input value={day.meals.b} onChange={e=>updateDay(dIdx, 'meals', {...day.meals, b: e.target.value})} className="border p-1 rounded w-full" /></div>
                                        <div><label className="text-gray-400 block mb-1">åˆé¤</label><input value={day.meals.l} onChange={e=>updateDay(dIdx, 'meals', {...day.meals, l: e.target.value})} className="border p-1 rounded w-full" /></div>
                                        <div><label className="text-gray-400 block mb-1">æ™šé¤</label><input value={day.meals.d} onChange={e=>updateDay(dIdx, 'meals', {...day.meals, d: e.target.value})} className="border p-1 rounded w-full" /></div>
                                    </div>

                                    <div className="space-y-3 mb-3">
                                        {day.spots.map((spot, sIdx) => (
                                            <div key={sIdx} className="bg-white border rounded p-3 relative group">
                                                <input value={spot.name} onChange={e=>updateDaySpot(dIdx, sIdx, 'name', e.target.value)} className="w-full font-bold text-gray-800 border-b mb-2 pb-1 outline-none text-sm" placeholder="æ™¯é»åç¨±" />
                                                <textarea rows="3" value={spot.desc} onChange={e=>updateDaySpot(dIdx, sIdx, 'desc', e.target.value)} className="w-full text-xs text-gray-500 outline-none resize-none" placeholder="æ™¯é»ä»‹ç´¹"></textarea>
                                                <button onClick={()=>removeSpot(dIdx, sIdx)} className="absolute top-2 right-2 text-gray-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity"><i class="fas fa-trash"></i></button>
                                            </div>
                                        ))}
                                    </div>
                                    <div className="flex gap-2 text-xs mb-2">
                                        <input value={day.hotel} onChange={e=>updateDay(dIdx, 'hotel', e.target.value)} className="flex-1 border p-1 rounded font-bold" placeholder="ä½å®¿é£¯åº—" />
                                        <input value={day.hotelTel} onChange={e=>updateDay(dIdx, 'hotelTel', e.target.value)} className="w-24 border p-1 rounded" placeholder="é›»è©±" />
                                    </div>
                                    <div className="flex gap-2 text-xs">
                                        <input value={day.hotelAddress} onChange={e=>updateDay(dIdx, 'hotelAddress', e.target.value)} className="flex-1 border p-1 rounded" placeholder="é£¯åº—åœ°å€ (è¼¸å…¥å¾Œæ‰æœƒé¡¯ç¤ºå¸æ©Ÿå¡)" />
                                    </div>
                                </div>
                            ))}
                        </div>

                        <div className="text-center mb-6 mt-4">
                            <button onClick={addDay} className="bg-gray-200 hover:bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg border-2 border-dashed border-gray-400 w-full transition-colors">
                                <i className="fas fa-plus-circle mr-1"></i> æ–°å¢ä¸€å¤©è¡Œç¨‹ (Day {data.days.length + 1})
                            </button>
                        </div>

                        <button onClick={download} className="w-full mt-8 bg-kr-blue hover:bg-blue-800 text-white py-4 rounded-xl font-bold text-lg shadow-lg transition-transform active:scale-95">
                            <i class="fas fa-download mr-2"></i> åŒ¯å‡ºå®¢æˆ¶ç«¯ç¶²é  (HTML)
                        </button>
                    </div>

                    <div className="w-1/2 bg-gray-200 flex flex-col h-screen">
                        {/* Right Tabs */}
                        <div className="flex border-b bg-white">
                            <button 
                                className={`flex-1 py-3 font-bold text-sm ${rightTab === 'preview' ? 'text-blue-600 border-b-2 border-blue-600' : 'text-gray-500'}`}
                                onClick={() => setRightTab('preview')}
                            >
                                <i className="fas fa-mobile-alt mr-2"></i> å³æ™‚é è¦½
                            </button>
                            <button 
                                className={`flex-1 py-3 font-bold text-sm ${rightTab === 'pdf' ? 'text-blue-600 border-b-2 border-blue-600' : 'text-gray-500'}`}
                                onClick={() => setRightTab('pdf')}
                            >
                                <i className="fas fa-file-pdf mr-2"></i> PDF ä¾†æº
                            </button>
                        </div>

                        {/* Content Area */}
                        <div className="flex-1 overflow-hidden relative bg-gray-200">
                            {rightTab === 'preview' && (
                                <div className="w-full h-full flex items-center justify-center p-4">
                                    <div className="phone-frame w-[375px] h-[750px] shadow-2xl relative bg-white scale-90 sm:scale-100 transition-transform origin-center">
                                        <div className="phone-notch"></div>
                                        <iframe srcDoc={getClientHtml(data)} className="w-full h-full border-none rounded-[2rem]"></iframe>
                                    </div>
                                </div>
                            )}

                            {rightTab === 'pdf' && (
                                <div className="w-full h-full p-4">
                                    {pdfUrl ? (
                                        <iframe src={pdfUrl} className="w-full h-full rounded-xl shadow-lg border bg-white"></iframe>
                                    ) : (
                                        <div className="h-full flex flex-col items-center justify-center text-gray-400">
                                            <i className="fas fa-file-pdf text-6xl mb-4 opacity-30"></i>
                                            <p>å°šæœªä¸Šå‚³èªªæ˜æœƒè³‡æ–™</p>
                                        </div>
                                    )}
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<GeneratorApp />);
    </script>
</body>
</html>